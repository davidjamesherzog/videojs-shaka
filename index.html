<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>videojs-shaka Demo</title>
  <link href="node_modules/video.js/dist/video-js.css" rel="stylesheet">
  <link href="dist/videojs-shaka.css" rel="stylesheet">
</head>
<body>
  <p>Dash via code</p>
  <video id="videojs-shaka-player" class="video-js vjs-default-skin" controls>
  </video>
  <br/>
  <div>
    <input id="stream" type="text" value="https://bitmovin-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd" style="width: 750px;"></input>
    <button id="play">Play</button>
    <p>(try hls with https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_fmp4/master.m3u8)</p>
  </div>
  
  <p>Dash via auto setup with autoInitQualityPicker: true</p>
    <video class="video-js vjs-default-skin" controls width="800" height="450"
      data-setup='
          {
            "techOrder": [
              "shaka"
            ],
            "shaka": {
              "autoInitQualityPicker": true,
              "debug": true
            }
          }
      '
    >
        <source
            src="https://bitmovin-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd"
            type="application/dash+xml"
        />
    </video>

  <p>HLS via auto setup with autoInitQualityPicker: true</p>
    <video class="video-js vjs-default-skin" controls  width="800" height="450"
      data-setup='
          {
            "techOrder": [
              "shaka"
            ],
            "shaka": {
              "autoInitQualityPicker": true,
              "debug": true
            }
          }
      '
    >
        <source
            src="https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_fmp4/master.m3u8"
            type="application/vnd.apple.mpegurl"
        />
    </video>
    
    <p>HLS (overrideNative: false) via auto setup</p>
    <video class="video-js vjs-default-skin" controls  width="800" height="450"
      data-setup='
          {
            "techOrder": [
              "shaka"
            ],
            "shaka": {
              "debug": true,
              "overrideNative": false
            }
          }
      '
    >
        <source
            src="https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_fmp4/master.m3u8"
            type="application/vnd.apple.mpegurl"
        />
    </video>
    
    <p>Dash + HLS via auto setup</p>
    <video class="video-js vjs-default-skin" controls  width="800" height="450"
      data-setup='
          {
            "techOrder": [
              "shaka"
            ],
            "shaka": {
              "debug": true
            }
          }
      '
    >
        <source
            src="https://bitmovin-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd"
            type="application/dash+xml"
        />
        <source
            src="https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_fmp4/master.m3u8"
            type="application/vnd.apple.mpegurl"
        />
    </video>
    
    <p>Dash (enableDash: false) + HLS via auto setup</p>
    <video class="video-js vjs-default-skin" controls  width="800" height="450"
      data-setup='
          {
            "techOrder": [
              "shaka"
            ],
            "shaka": {
              "debug": true,
              "enableDash": false
            }
          }
      '
    >
        <source
            src="https://bitmovin-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd"
            type="application/dash+xml"
        />
        <source
            src="https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_fmp4/master.m3u8"
            type="application/vnd.apple.mpegurl"
        />
    </video>
    
    <p>HLS + Dash via auto setup</p>
    <video class="video-js vjs-default-skin" controls  width="800" height="450"
      data-setup='
          {
            "techOrder": [
              "shaka"
            ],
            "shaka": {
              "debug": true
            }
          }
      '
    >
        <source
            src="https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_fmp4/master.m3u8"
            type="application/vnd.apple.mpegurl"
        />
        <source
            src="https://bitmovin-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd"
            type="application/dash+xml"
        />
    </video>
    
    <p>HLS (enableHls: false) + Dash via auto setup</p>
    <video class="video-js vjs-default-skin" controls  width="800" height="450"
      data-setup='
          {
            "techOrder": [
              "shaka"
            ],
            "shaka": {
              "debug": true,
              "enableHls": false
            }
          }
      '
    >
        <source
            src="https://devstreaming-cdn.apple.com/videos/streaming/examples/img_bipbop_adv_example_fmp4/master.m3u8"
            type="application/vnd.apple.mpegurl"
        />
        <source
            src="https://bitmovin-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd"
            type="application/dash+xml"
        />
    </video>
  
  <script src="node_modules/mux.js/dist/mux.js"></script>
  <script src="node_modules/shaka-player/dist/shaka-player.compiled.debug.js"></script>
  <script src="node_modules/video.js/dist/video.js"></script>
  <script src="dist/videojs-shaka.js"></script>
  <script>
    var player = videojs('videojs-shaka-player', {
      autoplay: true,
      techOrder: ['shaka'],
      width: 800,
      height: 450,
      shaka: {
        debug: true
      }
    });
    player.qualityPickerPlugin();
    player.src([{
      type: 'application/dash+xml',
      src: 'https://bitmovin-a.akamaihd.net/content/MI201109210084_1/mpds/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.mpd'
    }]);

    var stream = document.getElementById('stream');
    var play = document.getElementById('play');

    play.addEventListener('click', function() {
      player.reset();
      player.qualityPickerPlugin();
      player.src([{
        type: stream.value.endsWith('m3u8') ? 'application/x-mpegURL' : 'application/dash+xml',
        src: stream.value
      }]);
    });
  </script>
</body>
</html>
